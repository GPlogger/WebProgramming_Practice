<!DOCTYPE html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8" />
    <title>웹프로그래밍</title>
    <meta name="description" content="웹프로그래밍 강의 실습코드입니다." />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="og:title" content="" />
    <meta property="og:type" content="" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />

    <link rel="manifest" href="site.webmanifest" />
    <link rel="apple-touch-icon" href="icon.png" />
    <!-- Place favicon.ico in the root directory -->

    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/main.css" />

    <meta name="theme-color" content="#fafafa" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <!-- Add your site or application content here -->
    
    
    <script src="js/vendor/modernizr-3.11.2.min.js"></script>
    <script src="js/plugins.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>
    <script src="js/main.js"></script>
    
    <script>    // 동기(순차적으로 수행), 비동기(비순차적)
        /* 
        비동기의 예 : Server에 Request를 보내고 Response를 받는 과정 > 언제 작업이 끝날 지 모름 
        쓰레드 : 파이 값 계산할 때, 1~3조까지의 숫자를 더함 > 언제 작업이 끝날 지 모름
        - 위 작업이 끝날 때까지 동기라면 웹은 멈춰있게 됨
        비동기 프로그램 작성 법 : callback
        */
        // 프로미스 패턴 : 비동기 코드의 콜백 (콜백지옥) 보완 > 
        // then : 이전 줄의 명령이 끝났을 때 명령어 실행
        // catch : 에러 발생 시 실행
        
        // function PromiseExample(resolve, reject){
        //     // 결과가 정상완료 시 resolve
        //     // 동작 수행에서 오류 발생 시 reject
        //     if (success) {
        //         resolve();
        //     } else {
        //         reject();
        //     }
        // }
        
        // 프로미스 사용
        function sum() {
            return new Promise((resolve, reject) => {
                var sum = 0;
                for (let i = 0; i < 1000000000; i++){
                    sum += i;
                }
                resolve(sum);
            });
        }
        function sum1() {
            return new Promise((resolve, reject) => {
                var sum = 0;
                for (let i = 0; i < 1000000000; i++){
                    sum += i;
                }
                resolve(sum);
            });
        }


        sum()
        .then(sum => {
            console.log('sum', sum);
            return sum1();
        })
        .then(sum1 => {
            console.log('sum1', sum1);
        })
        sum1().then(sum => console.log(sum));


        
        //Callback
       /*
        function fetchExample(callback) {
            fetch("https://api.upbit.com/v1/market/all")
            .then((response) => response.json())
            .then((json => callback(json)));
            }

            function fetchExample2(callback) {
            fetch("https://api.upbit.com/v1/market/all")
            .then((response) => response.json())
            .then((json => callback(json)));
            }
            function fetchExample3(callback) {
            fetch("https://api.upbit.com/v1/market/all")
            .then((response) => response.json())
            .then((json => callback(json)));
            }

            console.log(1);
            fetchExample(function (json){
                for (let i = 0; i < 3; i++) {
                    console.log(json[i].market);
                }
                console.log(2);
            });
            fetchExample2(function (json){
                for (let i = 0; i < 3; i++) {
                    console.log(json[i].market);
                }
                console.log(3);
            });
            fetchExample3(function (json){
                for (let i = 0; i < 3; i++) {
                    console.log(json[i].market);
                }
                console.log(4);
            });
            */
    </script>

    <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
    <script>
      window.ga = function () {
        ga.q.push(arguments);
      };
      ga.q = [];
      ga.l = +new Date();
      ga("create", "UA-XXXXX-Y", "auto");
      ga("set", "anonymizeIp", true);
      ga("set", "transport", "beacon");
      ga("send", "pageview");
    </script>
    <script src="https://www.google-analytics.com/analytics.js" async></script>
  </body>
</html>
